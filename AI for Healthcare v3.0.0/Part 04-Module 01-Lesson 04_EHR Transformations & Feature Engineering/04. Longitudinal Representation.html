<!-- udacity2.0 -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Longitudinal Representation</title>
  <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
  <link rel="stylesheet" href="../assets/css/plyr.css">
  <link rel="stylesheet" href="../assets/css/katex.min.css">
  <link rel="stylesheet" href="../assets/css/jquery.mCustomScrollbar.min.css">
  <link rel="stylesheet" href="../assets/css/styles.css">
  <link rel="shortcut icon" type="image/png" href="../assets/img/udacimak.png" />
</head>

<body>
  <div class="wrapper">
    <nav id="sidebar">
  <div class="sidebar-header">
    <h3>EHR Transformations &amp; Feature Engineering </h3>
  </div>

  <ul class="sidebar-list list-unstyled CTAs">
    <li>
      <a href="../index.html" class="article">Back to Home</a>
    </li>
  </ul>

  <ul class="sidebar-list list-unstyled components">
    <li class="">
      <a href="01. EHR Transformations &amp; Feature Engineering Overview.html">01. EHR Transformations &amp; Feature Engineering Overview</a>
    </li>
    <li class="">
      <a href="02. EHR Dataset Levels.html">02. EHR Dataset Levels</a>
    </li>
    <li class="">
      <a href="03. Encounter Representation.html">03. Encounter Representation</a>
    </li>
    <li class="">
      <a href="04. Longitudinal Representation.html">04. Longitudinal Representation</a>
    </li>
    <li class="">
      <a href="05. How to Convert to Longitudinal Level.html">05. How to Convert to Longitudinal Level</a>
    </li>
    <li class="">
      <a href="06. Select Last Encounter Exercise.html">06. Select Last Encounter Exercise</a>
    </li>
    <li class="">
      <a href="07. Select Last Encounter Solution.html">07. Select Last Encounter Solution</a>
    </li>
    <li class="">
      <a href="08. Dataset Splitting Without Data Leakage.html">08. Dataset Splitting Without Data Leakage</a>
    </li>
    <li class="">
      <a href="09. How to Split Dataset at Patient Level.html">09. How to Split Dataset at Patient Level</a>
    </li>
    <li class="">
      <a href="10. Data Splitting Exercise.html">10. Data Splitting Exercise</a>
    </li>
    <li class="">
      <a href="11. Data Splitting Solution.html">11. Data Splitting Solution</a>
    </li>
    <li class="">
      <a href="12. ETL with TensorFlow Dataset API.html">12. ETL with TensorFlow Dataset API</a>
    </li>
    <li class="">
      <a href="13. Numerical Features &amp; Feature Column API.html">13. Numerical Features &amp; Feature Column API</a>
    </li>
    <li class="">
      <a href="14. Numerical Feature Column API Exercise.html">14. Numerical Feature Column API Exercise</a>
    </li>
    <li class="">
      <a href="15. Numerical Features Solution.html">15. Numerical Features Solution</a>
    </li>
    <li class="">
      <a href="16. Categorical Features &amp; Feature Column API.html">16. Categorical Features &amp; Feature Column API</a>
    </li>
    <li class="">
      <a href="17. Categorical Features Exercise.html">17. Categorical Features Exercise</a>
    </li>
    <li class="">
      <a href="18. Categorical Features with Feature Column API Solution.html">18. Categorical Features with Feature Column API Solution</a>
    </li>
    <li class="">
      <a href="19. Transformations and Feature Engineering Recap.html">19. Transformations and Feature Engineering Recap</a>
    </li>
  </ul>

  <ul class="sidebar-list list-unstyled CTAs">
    <li>
      <a href="../index.html" class="article">Back to Home</a>
    </li>
  </ul>
</nav>

    <div id="content">
      <header class="container-fluild header">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <div class="align-items-middle">
                <button type="button" id="sidebarCollapse" class="btn btn-toggle-sidebar">
                  <div></div>
                  <div></div>
                  <div></div>
                </button>

                <h1 style="display: inline-block">04. Longitudinal Representation</h1>
              </div>
            </div>
          </div>
        </div>
      </header>

      <main class="container">
        <div class="row">
          <div class="col-12">
            <div class="ud-atom">
  <h3></h3>
  <div>
  <h1 id="longitudinal-representation">Longitudinal Representation</h1>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>ND320 AIHCND C01 L03 A04 Longitudinal Representation</p></h3>
  <video controls>
  <source src="04. ND320 AIHCND C01 L03 A04 Longitudinal Representation-2yzNq6BQk4w.mp4" type="video/mp4">

  <track default="true" kind="subtitles" srclang="en" src="04. ND320 AIHCND C01 L03 A04 Longitudinal Representation-2yzNq6BQk4w.en.vtt" label="en">
</video>


</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <p>*Note: Typo at 3:00 should read "Google".</p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <h1 id="longitudinal-representation-key-points">Longitudinal Representation Key Points</h1>
<p><strong>Longitudinal Representation</strong>: Patient History</p>
<h3 id="what-is-a-longitudinal-data-representation">What is a longitudinal data representation?</h3>
<p>Another way to view it is a patient history representation. It is basically a way to aggregate all of the visits/encounters that a patient may have in the healthcare system. Having all of this information is ideal to best analyze and diagnose correctly, but the reality is that patient records do not always come cleanly organized and aggregated correctly, in real-world datasets. Luckily, we can use the line and encounter levels to help with that!</p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <figure class="figure">
    <img src="img/l3-ehr-data-transformations-and-tensorflow-feature-engineering-7.jpg" alt="Longitudinal Representation Example" class="img img-fluid">
    <figcaption class="figure-caption">
      <p>Longitudinal Representation Example</p>
    </figcaption>
  </figure>
</div>


</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <p>Combining patients together into a dataset and finding a way to aggregate and represent the visits across a patient is the key to being able to unlock powerful insights and analysis.</p>
<h3 id="challenges-and-benefits-of-using-the-longitudinal-level">Challenges and Benefits of Using the Longitudinal Level</h3>
<h4 id="challenges">Challenges:</h4>
<ul>
<li>Scaling with this type of data requires vast resources</li>
<li>Data representation and preparation requires more preparation and validation</li>
<li>Training vs production/deployment data differences can cause major issues with model predictions</li>
</ul>
<p><strong>Example</strong>: You train this great Model, and it has fantastic results! </p>
<p>However, the data you used for this model had an implicit assumption that you were unaware of :</p>
<p><em>Only the label for the last encounter for a patient history would be included.</em> </p>
<p>You think that you can always transform the data in production. Right?</p>
<p><strong>Reality</strong>: You have put your model into production and things start going haywire. </p>
<p>You are not getting the same results that you anticipated from your trained model. Even with some cross-validation and other augmentation methods, you still see significant model drift. After some analysis of the production data pipeline, you find out that the production use case has an <strong>Encounter selected at random</strong> from the patient history and information has been duplicated by accident because the information was not leveled correctly.</p>
<p>From this example, you can see how important it is to make sure you, or your data team, have properly aggregated the data. </p>
<h4 id="benefits">Benefits:</h4>
<p>Even though data preparation and validation are more difficult, there are significant benefits to using a longitudinal representation as it allows you to use a full patient history.  This helps to better model changes in state over time. When you can also aggregate other patients longitudinal data together, you can achieve some unbelievable results.</p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <figure class="figure">
    <img src="img/l3-ehr-data-transformations-and-tensorflow-feature-engineering-8.jpg" alt="Deep Learning Potential Importance" class="img img-fluid">
    <figcaption class="figure-caption">
      <p>Deep Learning Potential Importance</p>
    </figcaption>
  </figure>
</div>


</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <p>To further illustrate the importance of having a strong EHR longitudinal data representation, you can look through the links in this section about Google creating a data representation to feed into deep learning models from the Fast Healthcare Interoperability Resources or <strong>FHIR</strong> standards. </p>
<p>In Google's <a href="https://www.nature.com/articles/s41746-018-0029-1" rel="noopener noreferrer" target="_blank"><em>Nature</em></a> article, they highlighted the aforementioned challenges with building a longitudinal representation. The 216K+ patients in the dataset were extrapolated to 46B data points!  Now imagine attempting to scale this even further with more patients or other types of data like genomic data, clinical trial data, etc. This is where resources like cloud computing have become critical, but even these can be strained with this much data.</p>
<p>As most practitioners know, the data preparation stage is one of the most time consuming, but impactful parts of a data science project. The representation and deep learning models outperformed clinically used traditional predictive models in <strong>ALL</strong> cases. It is still early days for the healthcare industry as they have just started to consider using deep learning and still barriers exist in using them due to concerns about interpretability. Hopefully, with more studies like this, critical attention to detail and eye on data security and privacy we can bring this practice to the forefront in healthcare.</p>
<h4 id="additional-links">Additional Links</h4>
<ul>
<li><a href="https://www.nature.com/articles/s41746-018-0029-1" rel="noopener noreferrer" target="_blank">Google's Nature Paper</a></li>
<li><a href="https://patents.google.com/patent/US20160042124" rel="noopener noreferrer" target="_blank">Google's Patent</a></li>
<li><a href="https://www.hl7.org/fhir/overview.html" rel="noopener noreferrer" target="_blank">FHIR</a></li>
<li><a href="https://datica.com/blog/what-is-fhir/" rel="noopener noreferrer" target="_blank">FHIR Overview</a></li>
</ul>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>Longitudinal Level</p></h3>
  <div>
  <form>
    <fieldset>
      <legend><p>What are some of the challenges with longitudinal datasets?</p></legend>
    </fieldset>

    <div>
      <input type="checkbox" value="a1587147540821" name="1014636" id="a1587147540821">
      <label for="a1587147540821"><p>Scaling the collection and processing of this data can be resource intensive.</p></label>
    </div>
    <div>
      <input type="checkbox" value="a1587147602485" name="1014636" id="a1587147602485">
      <label for="a1587147602485"><p>Data cleaning and inspection are key parts of utilizing this data representation.</p></label>
    </div>
    <div>
      <input type="checkbox" value="a1587147767672" name="1014636" id="a1587147767672">
      <label for="a1587147767672"><p>There can be differences between training and production data, which can cause major issues.</p></label>
    </div>
  </form>

  <details>
    <summary><strong>SOLUTION:</strong></summary>
    <ul>
      <li>Scaling the collection and processing of this data can be resource intensive.</li>
      <li>Data cleaning and inspection are key parts of utilizing this data representation.</li>
      <li>There can be differences between training and production data, which can cause major issues.</li>
  </ul>
  </details>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>Reflect</p></h3>
  <div>
  <p><strong>QUESTION: </strong></p>
  <p>While creating and working with longitudinal datasets can be a challenge, there is tremendous value to using this level. Go to <a href="https://arxiv.org/search/?query=longitudinal+ehr&searchtype=all&source=header" rel="noopener noreferrer" target="_blank">arXiv</a> and search for longitudinal and EHR? Any interesting papers? Select one and share what you found interesting about it.</p>

  <details>
    <summary><strong>ANSWER:</strong></summary>
    <p><p>I searched and found this paper from the University of Cambridge and UCLA called <a href="https://arxiv.org/pdf/1912.09086.pdf" rel="noopener noreferrer" target="_blank">A Bayesian Approach to Modelling Longitudinal Data in Electronic Health Records</a>. This paper was very interesting for not only its content but also how many of the topics it includes ties in with the content in this course. I provided a few snippets below but feel free to read the whole paper now that you are have some knowledge about longitudinal EHR data!</p>
<ul>
<li>Missing data mentioned - In the "Informative Missing Values" section on page 3, it shares how missing values could indicate decision made by clinicians that could provide implicit information about a patient. This ties back to our understanding of MCAR, MAR, MNAR. </li>
<li>Demographics - It mentions " fixed demographic information " in the abstract and wanted to note this since this implies that there was some demographic analysis to "fix" the right groups for building the model and ties in with our lesson earlier on this topic.</li>
<li>Uses Bayesian method because it has the advantage of providing uncertainty estimates. This ties into what we will cover later when we learn about how to use Tensorflow Probability to build uncertainty estimation into our models.</li>
</ul></p>
  </details>
</div>


</div>
<div class="divider"></div>
          </div>

          <div class="col-12">
            <p class="text-right">
              <a href="05. How to Convert to Longitudinal Level.html" class="btn btn-outline-primary mt-4" role="button">Next Concept</a>
            </p>
          </div>
        </div>
      </main>

      <footer class="footer">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <p class="text-center">
                <a href="https://us-udacity.github.io/" target="_blank">【udacity2.0 】If you need more courses, please add wechat：udacity6</a>
              </p>
            </div>
          </div>
        </div>
      </footer>
    </div>
  </div>


  <script src="../assets/js/jquery-3.3.1.min.js"></script>
  <script src="../assets/js/plyr.polyfilled.min.js"></script>
  <script src="../assets/js/bootstrap.min.js"></script>
  <script src="../assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
  <script src="../assets/js/katex.min.js"></script>
  <script>
    // Initialize Plyr video players
    const players = Array.from(document.querySelectorAll('video')).map(p => new Plyr(p));

    // render math equations
    let elMath = document.getElementsByClassName('mathquill');
    for (let i = 0, len = elMath.length; i < len; i += 1) {
      const el = elMath[i];

      katex.render(el.textContent, el, {
        throwOnError: false
      });
    }

    // this hack will make sure Bootstrap tabs work when using Handlebars
    if ($('#question-tabs').length && $('#user-answer-tabs').length) {
      $("#question-tabs a.nav-link").on('click', function () {
        $("#question-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
      $("#user-answer-tabs a.nav-link").on('click', function () {
        $("#user-answer-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
    } else {
      $("a.nav-link").on('click', function () {
        $(".tab-pane").hide();
        $($(this).attr("href")).show();
      });
    }

    // side bar events
    $(document).ready(function () {
      $("#sidebar").mCustomScrollbar({
        theme: "minimal"
      });

      $('#sidebarCollapse').on('click', function () {
        $('#sidebar, #content').toggleClass('active');
        $('.collapse.in').toggleClass('in');
        $('a[aria-expanded=true]').attr('aria-expanded', 'false');
      });

      // scroll to first video on page loading
      if ($('video').length) {
        $('html,body').animate({ scrollTop: $('div.plyr').prev().offset().top});
      }

      // auto play first video: this may not work with chrome/safari due to autoplay policy
      if (players && players.length > 0) {
        players[0].play();
      }

      // scroll sidebar to current concept
      const currentInSideBar = $( "ul.sidebar-list.components li a:contains('04. Longitudinal Representation')" )
      currentInSideBar.css( "text-decoration", "underline" );
      $("#sidebar").mCustomScrollbar('scrollTo', currentInSideBar);
    });
  </script>
</body>

</html>
